{"version":3,"file":"vuex-persistedstate.es.js","sources":["../node_modules/deepmerge/dist/umd.js","../node_modules/shvl/dist/shvl.es.js","../index.js"],"sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global = global || self, global.deepmerge = factory());\n}(this, function () { 'use strict';\n\n\tvar isMergeableObject = function isMergeableObject(value) {\n\t\treturn isNonNullObject(value)\n\t\t\t&& !isSpecial(value)\n\t};\n\n\tfunction isNonNullObject(value) {\n\t\treturn !!value && typeof value === 'object'\n\t}\n\n\tfunction isSpecial(value) {\n\t\tvar stringValue = Object.prototype.toString.call(value);\n\n\t\treturn stringValue === '[object RegExp]'\n\t\t\t|| stringValue === '[object Date]'\n\t\t\t|| isReactElement(value)\n\t}\n\n\t// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\n\tvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\n\tvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\n\tfunction isReactElement(value) {\n\t\treturn value.$$typeof === REACT_ELEMENT_TYPE\n\t}\n\n\tfunction emptyTarget(val) {\n\t\treturn Array.isArray(val) ? [] : {}\n\t}\n\n\tfunction cloneUnlessOtherwiseSpecified(value, options) {\n\t\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t\t: value\n\t}\n\n\tfunction defaultArrayMerge(target, source, options) {\n\t\treturn target.concat(source).map(function(element) {\n\t\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t\t})\n\t}\n\n\tfunction getMergeFunction(key, options) {\n\t\tif (!options.customMerge) {\n\t\t\treturn deepmerge\n\t\t}\n\t\tvar customMerge = options.customMerge(key);\n\t\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n\t}\n\n\tfunction getEnumerableOwnPropertySymbols(target) {\n\t\treturn Object.getOwnPropertySymbols\n\t\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t\t})\n\t\t\t: []\n\t}\n\n\tfunction getKeys(target) {\n\t\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n\t}\n\n\tfunction mergeObject(target, source, options) {\n\t\tvar destination = {};\n\t\tif (options.isMergeableObject(target)) {\n\t\t\tgetKeys(target).forEach(function(key) {\n\t\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t\t});\n\t\t}\n\t\tgetKeys(source).forEach(function(key) {\n\t\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t\t} else {\n\t\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t\t}\n\t\t});\n\t\treturn destination\n\t}\n\n\tfunction deepmerge(target, source, options) {\n\t\toptions = options || {};\n\t\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\t\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\t\tvar sourceIsArray = Array.isArray(source);\n\t\tvar targetIsArray = Array.isArray(target);\n\t\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\t\tif (!sourceAndTargetTypesMatch) {\n\t\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t\t} else if (sourceIsArray) {\n\t\t\treturn options.arrayMerge(target, source, options)\n\t\t} else {\n\t\t\treturn mergeObject(target, source, options)\n\t\t}\n\t}\n\n\tdeepmerge.all = function deepmergeAll(array, options) {\n\t\tif (!Array.isArray(array)) {\n\t\t\tthrow new Error('first argument should be an array')\n\t\t}\n\n\t\treturn array.reduce(function(prev, next) {\n\t\t\treturn deepmerge(prev, next, options)\n\t\t}, {})\n\t};\n\n\tvar deepmerge_1 = deepmerge;\n\n\treturn deepmerge_1;\n\n}));\n","function t(t,n,r){return void 0===(t=(n.split?n.split(\".\"):n).reduce(function(t,n){return t&&t[n]},t))?r:t}function n(t,n,r,e){return(n=n.split?n.split(\".\"):n).slice(0,-1).reduce(function(t,n){return t[n]=t[n]||{}},t)[n.pop()]=r,t}export{t as get,n as set};\n//# sourceMappingURL=shvl.es.js.map\n","import merge from 'deepmerge';\nimport * as shvl from 'shvl';\n\nexport default function(options, storage, key) {\n  options = options || {};\n  storage = options.storage || (window && window.localStorage);\n  key = options.key || 'vuex';\n\n  function canWriteStorage(storage) {\n    try {\n      storage.setItem('@@', 1);\n      storage.removeItem('@@');\n      return true;\n    } catch (e) {}\n\n    return false;\n  }\n\n  function getState(key, storage, value) {\n    try {\n      return (value = storage.getItem(key)) && typeof value !== 'undefined'\n        ? JSON.parse(value)\n        : undefined;\n    } catch (err) {}\n\n    return undefined;\n  }\n\n  function filter() {\n    return true;\n  }\n\n  function setState(key, state, storage) {\n    return storage.setItem(key, JSON.stringify(state));\n  }\n\n  function reducer(state, paths) {\n    return paths.length === 0\n      ? state\n      : paths.reduce(function(substate, path) {\n          return shvl.set(substate, path, shvl.get(state, path));\n        }, {});\n  }\n\n  function subscriber(store) {\n    return function(handler) {\n      return store.subscribe(handler);\n    };\n  }\n\n  if (!canWriteStorage(storage)) {\n    throw new Error('Invalid storage instance given');\n  }\n\n  return function(store) {\n    const savedState = shvl.get(options, 'getState', getState)(key, storage);\n\n    if (typeof savedState === 'object' && savedState !== null) {\n      store.replaceState(merge(store.state, savedState, {\n        arrayMerge: options.arrayMerger || function (store, saved) { return saved },\n        clone: false,\n      }));\n    }\n\n    (options.subscriber || subscriber)(store)(function(mutation, state) {\n      if ((options.filter || filter)(mutation)) {\n        (options.setState || setState)(\n          key,\n          (options.reducer || reducer)(state, options.paths || []),\n          storage\n        );\n      }\n    });\n  };\n};\n"],"names":["module","isMergeableObject","value","isNonNullObject","stringValue","Object","prototype","toString","call","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","Symbol","for","cloneUnlessOtherwiseSpecified","options","clone","deepmerge","Array","isArray","defaultArrayMerge","target","source","concat","map","element","getKeys","keys","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getEnumerableOwnPropertySymbols","mergeObject","destination","forEach","key","customMerge","getMergeFunction","arrayMerge","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","all","array","Error","reduce","prev","next","factory","t","n","r","split","storage","getState","getItem","JSON","parse","undefined","err","window","localStorage","setItem","removeItem","e","canWriteStorage","store","savedState","shvl","replaceState","merge","state","arrayMerger","saved","subscriber","handler","subscribe","mutation","setState","stringify","reducer","paths","length","substate","path","slice","pop"],"mappings":"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"}